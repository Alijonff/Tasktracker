

### 1. Обзор и цели

Система предназначена для учёта задач и рабочего времени в иерархии «Департамент → Управление → Отдел → Сотрудник». Поддерживаются индивидуальные и коллективные (аукционные) задачи, рейтинговая система, учёт отработанных часов и аналитика по подразделениям и отдельным сотрудникам. Интерфейс должен быть адаптивным и соответствовать фирменной палитре (#0d5257 и #FFFFFF).

### 2. Модель данных

* **Департамент, управление, отдел** — сущности для построения иерархии. Каждая имеет название, директора/руководителя и связь с родительским элементом.

* **Роль** — Администратор, Директор департамента, Руководитель управления, Руководитель отдела, Старший сотрудник, Сотрудник.

* **Пользователь** — имя, электронная почта, отдел, роль, рейтинг, суммарные часы, параметры для входа.

* **Задача**:

  * *Общие поля:* название, описание, создатель, исполнитель (при назначении), подразделение, тип (индивидуальная или аукционная), статус, плановое время, фактическое время, attachments, комментарии/чат, дата создания, дедлайн, рейтинг создателя/исполнителя.
  * *Статус:* «Бэклог», «В работе», «На проверке», «Выполнена», «Просрочена». Задачу в статус «На проверке» проверяет тот, кто её создал.
  * *Аукционные задачи:* хранят список ставок (предлагаемое время и рейтинг участника), начальное время, время старта и интервал увеличения — если в течение 4 рабочих часов никто не предложил меньший срок, то начальное время постепенно увеличивается.

* **Тайм‑лог** — записи о фактическом времени (начало, конец, длительность, тип активности). Пока предусмотрён ручной ввод.

* **Сообщение/Комментарий** — текст, автор, временная метка, привязка к задаче. Возможность вложения файлов (документы, изображения), как минимум ссылкой на хранение в Supabase Storage.

### 3. Права доступа

* **Администратор:** видит и управляет всеми департаментами, создаёт структуру, назначает роли, имеет полный доступ.
* **Директор департамента:** видит все данные своего департамента, может редактировать задачи/пользователей в его пределах.
* **Руководитель управления/отдела:** видит все задачи департамента, но редактировать может только в своём управлении/отделе.
* **Старший сотрудник:** может создавать задачи (индивидуальные и аукционные), управляет ставками на свои задачи, видит все задачи департамента.
* **Сотрудник:** видит задачи, назначенные ему или коллективные задачи своего отдела/управления, участвует в аукционах, может вести переписку и прикреплять файлы, но не может создавать и редактировать задачи.

### 4. Процессы работы с задачами

* **Создание:** Руководители и старшие сотрудники формируют задачу, выбирают тип (индивидуальная/общая), указывают описание, начальное время, дедлайн и подразделение.
* **Аукцион:** После публикации задачи сотрудники подразделения видят её и предлагают время выполнения (не превышающее начальное). Выигрывает минимальное время; при равенстве — более высокий рейтинг. Через 4 часа начальное время автоматически увеличивается (например, на 10 % каждый час), чтобы стимулировать отклик.
* **Выполнение:** Исполнитель помечает задачу «В работе», после завершения — «На проверке». Создатель оценивает результат и переводит статус в «Выполнена» или возвращает на доработку. По истечении дедлайна без закрытия статус становится «Просрочена».
* **Учёт времени:** Исполнитель вручную вводит фактическое время; система сохраняет тайм‑лог.

### 5. Расчёт рейтингов и аналитики

* **Рейтинг сотрудника** повышается при выполнении задач в заявленное время и снижается при постоянных просрочках/превышениях. Рейтинг виден всем участникам.
* **Рейтинг директора** — по аналогии с предыдущей логикой: снижать при систематических нарушениях сроков и завышенных оценках.
* **Аналитика:** отчёты в разрезе сотрудников, отделов, управлений, департаментов: суммарные часы, среднее время задачи, средние часы в день, статистика по просрочкам, диаграммы рейтинга. Формы вывода в виде таблиц, диаграмм.

### 6. Технологический стек и реализации

Примерный стек можно взять за основу из шаблона MiniMax: фронтенд на Next.js/React с TypeScript, UI на Tailwind CSS (с возможностью тёмной темы и эффекта «glassmorphism»), управление состоянием через React Context/Redux + React Query/Zustand, серверная часть — Supabase (PostgreSQL + Supabase Auth + Storage). Это позволит быстро реализовать адаптивный интерфейс, хранение данных и файлов, а также доступ на мобильных устройствах. Отчёты можно строить на стороне клиента или через SQL‐функции Supabase.

### 7. Требования к интерфейсу

* Адаптивный дизайн, одинаково удобный на десктопе и мобильных устройствах.
* Интуитивная навигация: разделы «Мои задачи», «Аукционы», «Создать задачу», «Отчёты», «Администрирование».
* Цветовая схема: основной цвет — тёмный #0d5257, текст и элементы контраста — белый #FFFFFF.

